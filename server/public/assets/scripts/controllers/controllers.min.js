/*! health_tracker 2015-11-30 */
myApp.controller("AddConditionController",["$scope","$http","$uibModalInstance",function(a,b,c){a.conditions=[],a.condition={};var d={patient_id:1};a.insertCondition=function(a){a.patient_id=d.patient_id,b.post("/conditions/conditions",a).then(function(a){console.log("do something after inserting")})},a.ok=function(b){console.log("ok function ",b),a.insertCondition(b),c.close("ok")},a.cancel=function(){c.dismiss("cancel")}}]),myApp.controller("AddMedicationController",["$scope","$http","$uibModalInstance",function(a,b,c){a.medications=[],a.medication={};var d={patient_id:1};a.insertMedication=function(a){a.patient_id=d.patient_id,b.post("/medications/medications",a).then(function(a){console.log("do something after inserting")})},a.ok=function(b){console.log("ok function ",b),a.insertMedication(b),c.close("ok")},a.cancel=function(){c.dismiss("cancel")}}]),myApp.controller("AddPatientController",["$scope","$http","$uibModalInstance",function(a,b,c){a.patients=[],a.patient={};var d={patient_id:1};a.insertPatient=function(a){a.patient_id=d.patient_id,b.post("/patient/patients",a).then(function(a){console.log("do something after inserting")})},a.ok=function(b){console.log("ok function ",b),a.insertPatient(b),c.close("ok")},a.cancel=function(){c.dismiss("cancel")}}]),myApp.controller("ConditionsController",["$scope","$http","$uibModal",function(a,b,c){a.conditions=[],a.condition={};var d={patient_id:1};a.getConditions=function(){b.get("/conditions/conditions",{params:d}).then(function(b){a.conditions=b.data})},a.getConditions(),a.addCondition=function(){var b=c.open({animation:a.animationsEnabled,templateUrl:"../assets/views/templates/addcondition.html",controller:"AddConditionController",size:"lg",resolve:{items:function(){return"something"}}});b.result.then(function(b){"ok"==b&&a.getConditions()},function(){})},a.editCondition=function(b){var d=c.open({animation:a.animationsEnabled,templateUrl:"../assets/views/templates/editcondition.html",controller:"EditConditionController",size:"lg",resolve:{items:function(){return b}}});d.result.then(function(b){"ok"==b&&a.getConditions()},function(){})}}]),myApp.controller("DailyDataController",["$scope","$http",function(a,b){a.medications=[],a.conditions=[],a.selectedDate={};var c={patient_id:1};a.getConditions=function(){b.get("/dailydata/conditions",{params:c}).then(function(b){a.conditions=b.data})},a.getConditions(),a.getMedications=function(){b.get("/dailydata/medications",{params:c}).then(function(b){a.medications=b.data})},a.getMedications(),a.submitConditions=function(d){for(var e=0;e<d.length;e++){var f={};d[e].addCheckbox&&(f.entry_date=a.selectedDate.date,f.patient_id=c.patient_id,f.condition_id=d[e].condition_id,f.add_value=d[e].addValue,b.post("/dailydata/conditions",f).then(function(b){a.getConditions()}))}},a.submitMedications=function(d){for(var e=0;e<d.length;e++){var f={};d[e].addCheckbox&&(f.entry_date=a.selectedDate.date,f.patient_id=c.patient_id,f.medication_id=d[e].medication_id,f.dose_given=d[e].suggested_dose,f.uom=d[e].uom,b.post("/dailydata/medications",f).then(function(b){a.getMedications()}))}}}]),myApp.controller("DashboardController",["$scope","$http",function(a,b){a.medications=[],a.conditions=[],a.allconditions=[],a.conditionChartData={},a.filterData={};var c=1;a.filterData.patient_id=c,a.filterData.end_date||(a.filterData.end_date=new Date),a.filterData.start_date||(a.filterData.start_date=new Date(a.filterData.end_date.getTime()-6048e5)),a.getAllConditions=function(){b.get("/dashboard/allconditions",{params:a.filterData}).then(function(b){a.allconditions=b.data,a.filterData.condition_id=1})},a.getAllConditions(),a.loadData=function(){a.getMedications(),a.getConditions()},a.getMedications=function(){b.get("/dashboard/medications",{params:a.filterData}).then(function(b){a.medications=b.data})},a.getMedications(),a.getConditions=function(){b.get("/dashboard/conditions",{params:a.filterData}).then(function(b){a.conditions=b.data,a.conditionChartData={chart:{caption:"Condition Chart",subCaption:"",xAxisName:"Date",yAxisName:"Value",lineThickness:"2",paletteColors:"#0075c2",baseFontColor:"#333333",baseFont:"Helvetica Neue,Arial",captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",showBorder:"0",bgColor:"#ffffff",showShadow:"0",canvasBgColor:"#ffffff",canvasBorderAlpha:"0",divlineAlpha:"100",divlineColor:"#999999",divlineThickness:"1",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",showXAxisLine:"1",xAxisLineThickness:"1",xAxisLineColor:"#999999",showAlternateHGridColor:"0"},data:a.conditions}})},a.getConditions()}]),myApp.controller("EditConditionController",["$scope","$http","$uibModalInstance","items",function(a,b,c,d){console.log("items ",d),a.conditions=d,a.editCondition=function(a){return b.put("/conditions/conditions",a).then(function(a){})},a.ok=function(b){var d=a.editCondition(b);d.then(function(){c.close("ok")})},a.cancel=function(){c.dismiss("cancel")}}]),myApp.controller("EditMedicationController",["$scope","$http","$uibModalInstance","items",function(a,b,c,d){console.log("items ",d),a.meds=d,a.editMedication=function(a){return b.put("/medications/medications",a).then(function(a){})},a.ok=function(b){var d=a.editMedication(b);d.then(function(){c.close("ok")})},a.cancel=function(){c.dismiss("cancel")}}]),myApp.controller("EditPatientController",["$scope","$http","$uibModalInstance","items",function(a,b,c,d){d.dob=new Date(d.dob),a.patient=d,a.editPatient=function(a){return b.put("/patient/patients",a).then(function(a){})},a.ok=function(b){var d=a.editPatient(b);d.then(function(){c.close("ok")})},a.cancel=function(){c.dismiss("cancel")}}]),myApp.controller("HeaderController",["$scope","$http","$uibModal",function(a,b,c){a.patients=[],a.patient={};var d=1;a.patients.patient_id=d,a.getAllPatients=function(){b.get("/patient/allpatients").then(function(b){a.patients=b.data})},a.getPatient=function(){a.patient.patient_id=d,b.get("/patient/patients",{params:a.patient}).then(function(b){a.patient=b.data})},a.getAllPatients(),a.getPatient(),a.addPatient=function(){var b=c.open({animation:a.animationsEnabled,templateUrl:"../assets/views/templates/addpatient.html",controller:"AddPatientController",size:"lg",resolve:{items:function(){return"something"}}});b.result.then(function(b){"ok"==b&&(a.getPatient(),a.getAllPatients())},function(){})},a.editPatient=function(b){console.log("edit patient ",b);var d=c.open({animation:a.animationsEnabled,templateUrl:"../assets/views/templates/editpatient.html",controller:"EditPatientController",size:"lg",resolve:{items:function(){return b}}});d.result.then(function(b){"ok"==b&&(a.getPatient(),a.getAllPatients())},function(){console.log("cancelled?"),a.getPatient()})}}]),myApp.controller("MedicationsController",["$scope","$http","$uibModal",function(a,b,c){a.medications=[],a.medication={};var d={patient_id:1};a.getMedications=function(){b.get("/medications/medications",{params:d}).then(function(b){a.medications=b.data})},a.getMedications(),a.addMedication=function(){var b=c.open({animation:a.animationsEnabled,templateUrl:"../assets/views/templates/addmedication.html",controller:"AddMedicationController",size:"lg",resolve:{items:function(){return"something"}}});b.result.then(function(b){"ok"==b&&a.getMedications()},function(){})},a.editMedication=function(b){var d=c.open({animation:a.animationsEnabled,templateUrl:"../assets/views/templates/editmedication.html",controller:"EditMedicationController",size:"lg",resolve:{items:function(){return b}}});d.result.then(function(b){"ok"==b&&a.getMedications()},function(){})}}]),myApp.controller("NavController",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]);